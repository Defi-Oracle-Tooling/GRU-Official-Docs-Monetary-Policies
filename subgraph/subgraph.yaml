specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: GrcDiamond
    network: mainnet
    source:
      address: "0x0000000000000000000000000000000000000000" # replace on deploy
      abi: GrcDiamond
      startBlock: 0
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - IndexWeightsUpdated
        - DashboardSnapshot
        - BondIssued
        - CouponsAccrued
        - BondBuyback
        - CutProposed
        - CutQueued
        - CutExecuted
        - EmergencyBrake
        - FunctionPaused
        - PoRPosted
        - PoRSealed
        - RateSet
        - Triangulated
        - Redeemed
        - FeeUpdated
      abis:
        - name: GrcDiamond
          file: ../artifacts/contracts/GrcDiamond.sol/GrcDiamond.json
      eventHandlers:
        - event: IndexWeightsUpdated(bytes32,uint64)
          handler: handleIndexWeightsUpdated
        - event: DashboardSnapshot(bytes32,uint64,uint256,uint256)
          handler: handleDashboardSnapshot
        - event: BondIssued(bytes32,address,uint256)
          handler: handleBondIssued
        - event: CouponsAccrued(bytes32,uint256)
          handler: handleCouponsAccrued
        - event: BondBuyback(bytes32,uint256)
          handler: handleBondBuyback
        - event: CutProposed(bytes32,address,address,bytes)
          handler: handleCutProposed
        - event: CutQueued(bytes32,uint256)
          handler: handleCutQueued
        - event: CutExecuted(bytes32)
          handler: handleCutExecuted
        - event: EmergencyBrake(bytes4,bool)
          handler: handleEmergencyBrake
        - event: FunctionPaused(bytes4,bool)
          handler: handleFunctionPaused
        - event: PoRPosted(uint64,bytes32,string)
          handler: handlePoRPosted
        - event: PoRSealed(uint64)
          handler: handlePoRSealed
        - event: RateSet(bytes32,bytes32,uint256)
          handler: handleRateSet
        - event: Triangulated(bytes32,bytes32,uint256,uint256)
          handler: handleTriangulated
        - event: Redeemed(bytes32,bytes32,uint256,uint256)
          handler: handleRedeemed
        - event: FeeUpdated(uint256,uint256)
          handler: handleFeeUpdated
      file: ./src/mapping.ts
